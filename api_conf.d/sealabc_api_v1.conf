# Routing
location / {
    # Policy configuration here (authentication, rate limiting, logging...)
    limit_req zone=myRateLimit burst=200 nodelay;
    limit_req_status 429;
    access_log /var/log/nginx/sealabc_api_v1.log main;
    
    location /api/v1/call/application {
        limit_except POST {
            deny all;
        }
        error_page 403 = @405;

        proxy_pass http://sealabc_nodes;
    }

    location /api/v1/query/application {
        limit_except POST {
            deny all;
        }
        error_page 403 = @405;

        proxy_pass http://sealabc_nodes;
    }

    location /api/v1/get {
        limit_except GET {
            deny all;
        }
        error_page 403 = @405;

        proxy_pass http://sealabc_nodes;
    }

}
